<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تتبع حجزك | Samo Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #22c55e; --bg: #020617; --card: #0f172a; --text: #ffffff; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; transition: 0.3s; }
        body { background: var(--bg); color: var(--text); padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        .track-card { width: 100%; max-width: 450px; background: var(--card); padding: 25px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 15px 35px rgba(0,0,0,0.5); text-align: center; }
        
        /* نظام التبديل (Tabs) */
        .search-tabs { display: flex; background: #1e293b; border-radius: 12px; margin-bottom: 20px; padding: 5px; }
        .tab { flex: 1; padding: 10px; cursor: pointer; border-radius: 8px; font-size: 13px; font-weight: bold; color: #94a3b8; }
        .tab.active { background: var(--primary); color: #000; }

        input { width: 100%; padding: 14px; background: #000; border: 1px solid #334155; border-radius: 12px; color: var(--primary); margin-bottom: 15px; outline: none; text-align: center; font-size: 18px; font-weight: bold; }
        
        .btn-search { width: 100%; padding: 15px; background: var(--primary); color: #000; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        
        /* منطقة النتيجة */
        #resultArea { margin-top: 25px; display: none; animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .status-badge { display: inline-block; padding: 8px 20px; border-radius: 50px; font-size: 14px; font-weight: bold; margin-top: 10px; }
        .pending { background: rgba(234, 179, 8, 0.1); color: #eab308; border: 1px solid #eab308; }
        .done { background: rgba(34, 197, 94, 0.1); color: var(--primary); border: 1px solid var(--primary); }

        .back-link { margin-top: 25px; display: block; color: #64748b; text-decoration: none; font-size: 13px; }
        .back-link:hover { color: var(--primary); }
    </style>
</head>
<body>

    <div class="track-card">
        <h2 style="margin-bottom: 20px; color: var(--primary);"><i class="fas fa-search-location"></i> تتبع طلبك</h2>
        
        <div class="search-tabs">
            <div id="tabRole" class="tab active" onclick="switchTab('role')">برقم الدور</div>
            <div id="tabCode" class="tab" onclick="switchTab('code')">بكود المنصة</div>
        </div>

        <div id="inputContainer">
            <input type="number" id="searchInput" placeholder="اكتب رقم دورك هنا..">
        </div>

        <button class="btn-search" onclick="findBooking()">
            <span>ابحث عن الحجز</span>
            <i class="fas fa-magic"></i>
        </button>

        <div id="resultArea">
            <div style="background: #1e293b; padding: 20px; border-radius: 15px; border-right: 4px solid var(--primary);">
                <p id="resName" style="font-weight: bold; font-size: 18px;"></p>
                <p id="resId" style="color: #94a3b8; font-size: 13px; margin: 5px 0;"></p>
                <div id="resStatus" class="status-badge"></div>
            </div>
        </div>

        <a href="index.html" class="back-link"><i class="fas fa-arrow-right"></i> العودة للرئيسية</a>
    </div>

    <script>
        let currentMode = 'role';

        function switchTab(mode) {
            currentMode = mode;
            document.getElementById('tabRole').classList.toggle('active', mode === 'role');
            document.getElementById('tabCode').classList.toggle('active', mode === 'code');
            document.getElementById('searchInput').placeholder = mode === 'role' ? "اكتب رقم دورك هنا.." : "اكتب كود المنصة بتاعك..";
            document.getElementById('searchInput').type = mode === 'role' ? "number" : "text";
            document.getElementById('resultArea').style.display = 'none';
        }

        function findBooking() {
            const val = document.getElementById('searchInput').value;
            const resArea = document.getElementById('resultArea');
            if(!val) return alert("اكتب حاجة نبحث بيها!");

            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            
            // البحث الذكي حسب الاختيار
            const result = bookings.find(b => 
                currentMode === 'role' ? b.id.toString() === val : b.pCode === val
            );

            if(result) {
                resArea.style.display = 'block';
                document.getElementById('resName').innerText = "أهلاً يا " + result.name;
                document.getElementById('resId').innerText = "رقم دورك الحالي: " + result.id;
                
                const statusBtn = document.getElementById('resStatus');
                statusBtn.innerText = result.status;
                statusBtn.className = "status-badge " + (result.status === 'تم الانتهاء' ? 'done' : 'pending');
            } else {
                alert("ملقناش بيانات بالاسم ده يا وحش، تأكد من الكود!");
                resArea.style.display = 'none';
            }
        }
    </script>
</body>
</html>
