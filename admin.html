<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samo Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #22c55e; --bg: #020617; --card: #0f172a; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: white; padding: 20px; }
        #login { max-width: 400px; margin: 100px auto; background: var(--card); padding: 30px; border-radius: 20px; text-align: center; border: 1px solid var(--primary); }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #334155; background: #1e293b; color: white; }
        .admin-content { display: none; max-width: 1200px; margin: 0 auto; }
        .stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .stat-card { flex: 1; background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid #334155; text-align: center; }
        .stat-card h2 { color: var(--primary); }
        .filter-bar { margin-bottom: 15px; display: flex; gap: 10px; }
        table { width: 100%; background: var(--card); border-radius: 15px; overflow: hidden; border-collapse: collapse; }
        th, td { padding: 15px; text-align: right; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .badge { padding: 5px 10px; border-radius: 8px; font-size: 11px; cursor: pointer; }
        .bg-green { background: rgba(34,197,94,0.2); color: var(--primary); }
        .bg-red { background: rgba(239,68,68,0.2); color: #ef4444; }
        .pass-cell { font-family: monospace; filter: blur(4px); cursor: pointer; }
        .pass-cell:hover { filter: blur(0); }
    </style>
</head>
<body>

<div id="login">
    <h2>Ù…Ø¯ÙŠØ± Samo Solutions</h2>
    <input type="email" id="admE" placeholder="Email">
    <input type="password" id="admP" placeholder="Password">
    <button onclick="login()" style="width:100%; padding:15px; background:var(--primary); border:none; border-radius:10px; cursor:pointer">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="admin-content" id="admin">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… âš™ï¸</h1>
        <button onclick="location.reload()" style="background:#ef4444; color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="stats">
        <div class="stat-card"><h2 id="tOrder">0</h2><p>Ø·Ù„Ø¨Ø§Øª</p></div>
        <div class="stat-card"><h2 id="tPay" style="color:#facc15">0</h2><p>Ù„Ù… ÙŠØ¯ÙØ¹ÙˆØ§</p></div>
    </div>

    <div class="filter-bar">
        <button onclick="render('all')" style="padding:5px 15px; border-radius:8px; border:none; cursor:pointer">Ø§Ù„ÙƒÙ„</button>
        <button onclick="render('Ù†Ù‚Ø¯ÙŠ')" style="padding:5px 15px; border-radius:8px; border:none; cursor:pointer">ÙƒØ§Ø´</button>
    </div>

    <table>
        <thead><tr><th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>Ø§Ù„Ù…Ù†ØµØ©</th><th>Ø§Ù„Ø¯ÙØ¹</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead>
        <tbody id="tbody"></tbody>
    </table>
</div>

<script>
    function login() {
        if(document.getElementById('admE').value === "mohamedsamoha37@gmail.com" && document.getElementById('admP').value === "Mody1234m@") {
            document.getElementById('login').style.display='none';
            document.getElementById('admin').style.display='block';
            render('all');
        } else { alert("ØºÙ„Ø·!"); }
    }

    function render(filter) {
        let b = JSON.parse(localStorage.getItem('bookings') || '[]');
        if(filter !== 'all') b = b.filter(x => x.method === filter);
        const tbody = document.getElementById('tbody');
        tbody.innerHTML = '';
        b.forEach(order => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><b>${order.name}</b><br><small>${order.school} - ${order.class}</small></td>
                <td><small>ÙƒÙˆØ¯: ${order.pCode}</small><br><small class="pass-cell">Ø³Ø±: ${order.pPass}</small></td>
                <td><span class="badge ${order.payStatus==='ØªÙ… Ø§Ù„Ø¯ÙØ¹'?'bg-green':'bg-red'}" onclick="updatePay(${order.id})">${order.payStatus}</span></td>
                <td><select onchange="updateStatus(${order.id}, this.value)">
                    <option ${order.status==='ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…'?'selected':''}>ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
                    <option ${order.status==='Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯ÙØ¹'?'selected':''}>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯ÙØ¹</option>
                    <option ${order.status==='Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„'?'selected':''}>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„</option>
                    <option ${order.status==='ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡'?'selected':''}>ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
                </select></td>
                <td>
                    <button onclick="sendWA('${order.name}', ${order.id}, '${order.payPh}')" style="color:#25d366; background:none; border:none; cursor:pointer; font-size:18px"><i class="fab fa-whatsapp"></i></button>
                    <button onclick="del(${order.id})" style="color:#ef4444; background:none; border:none; cursor:pointer; margin-right:10px"><i class="fas fa-trash"></i></button>
                </td>
            `;
            tbody.appendChild(tr);
        });
        document.getElementById('tOrder').innerText = b.length;
        document.getElementById('tPay').innerText = b.filter(x => x.payStatus !== 'ØªÙ… Ø§Ù„Ø¯ÙØ¹').length;
    }

    function updatePay(id) {
        let b = JSON.parse(localStorage.getItem('bookings'));
        let o = b.find(x => x.id == id);
        o.payStatus = o.payStatus === 'ØªÙ… Ø§Ù„Ø¯ÙØ¹' ? 'Ù„Ù… ÙŠØ¯ÙØ¹' : 'ØªÙ… Ø§Ù„Ø¯ÙØ¹';
        localStorage.setItem('bookings', JSON.stringify(b)); render('all');
    }

    function updateStatus(id, val) {
        let b = JSON.parse(localStorage.getItem('bookings'));
        let o = b.find(x => x.id == id);
        o.status = val;
        localStorage.setItem('bookings', JSON.stringify(b));
        if(val === 'ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡') alert('Ø¹Ø§Ø´! Ø§Ø¨Ø¹ØªÙ„Ù‡ ÙˆØ§ØªØ³Ø§Ø¨ Ù‚ÙˆÙ„Ù‡ Ø®Ù„ØµØª');
        render('all');
    }

    function del(id) { if(confirm('Ù…Ø³Ø­ØŸ')) { let b = JSON.parse(localStorage.getItem('bookings')); b = b.filter(x => x.id != id); localStorage.setItem('bookings', JSON.stringify(b)); render('all'); } }

    function sendWA(name, id, phone) {
        let p = phone || prompt("Ø¯Ø®Ù„ Ø±Ù‚Ù…Ù‡:");
        if(p) window.open(`https://wa.me/2${p}?text=ÙŠØ§ Ø¨Ø·Ù„ ÙŠØ§ ${name} Ø·Ù„Ø¨Ùƒ Ø±Ù‚Ù… ${id} Ø®Ù„Øµ! ğŸš€`);
    }
</script>
</body>
</html>
